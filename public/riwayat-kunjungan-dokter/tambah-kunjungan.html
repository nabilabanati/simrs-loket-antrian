<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIMRS - Sistem Informasi Manajemen Rumah Sakit</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-blue': '#3b82f6',
                        'light-blue': '#e0f2fe',
                        'sidebar-bg': '#f8fafc',
                        'nav-text': '#64748b'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200">
        <div class="flex items-center justify-between px-6 py-4">
            <div class="flex items-center space-x-3">
                <div class="w-8 h-8 bg-primary-blue rounded-lg flex items-center justify-center">
                    <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
                    </svg>
                </div>
                <h1 class="text-xl font-semibold text-gray-800">SIMRS</h1>
            </div>
            <div class="flex items-center space-x-4">
                <span class="text-sm text-gray-600">dr. Sho</span>
                <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center">
                    <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                    </svg>
                </div>
            </div>
        </div>
    </header>

    <div class="flex min-h-screen">
        <!-- Sidebar -->
        <aside class="w-64 bg-sidebar-bg border-r border-gray-200">
            <nav class="p-4">
                <!-- Dashboard Section -->
                <div class="mb-6">
                    <div class="flex items-center justify-between py-2 px-3 text-primary-blue bg-light-blue rounded-lg mb-2">
                        <div class="flex items-center space-x-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"/>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5a2 2 0 012-2h4a2 2 0 012 2v6a2 2 0 01-2 2H10a2 2 0 01-2-2V5z"/>
                            </svg>
                            <span class="text-sm font-medium">Dashboard</span>
                        </div>
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </div>
                    
                    <div class="ml-4 space-y-1">
                        <a href="#" class="block py-2 px-3 text-sm text-nav-text hover:text-gray-800 hover:bg-gray-100 rounded-md">Default</a>
                        <a href="#" class="block py-2 px-3 text-sm text-nav-text hover:text-gray-800 hover:bg-gray-100 rounded-md">Alternative</a>
                    </div>
                </div>

                <!-- Riwayat Kunjungan Pasien -->
                <div class="mb-6">
                    <div class="flex items-center justify-between py-2 px-3 text-nav-text hover:text-gray-800 rounded-lg mb-2 cursor-pointer">
                        <div class="flex items-center space-x-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"/>
                            </svg>
                            <span class="text-sm font-medium">Riwayat Kunjungan Pasien</span>
                        </div>
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                        </svg>
                    </div>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 p-6">
            <!-- Breadcrumb -->
            <nav class="flex items-center space-x-2 text-sm text-gray-500 mb-6">
                <span>Poli Penyakit Dalam</span>
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                </svg>
                <span>Data Pasien</span>
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                </svg>
                <span class="text-gray-800">Anjani Shatila</span>
            </nav>

            <!-- Patient Header -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6">
                <div class="flex items-center justify-between">
                    <div>
                        <div class="flex items-center space-x-3">
                            <h1 class="text-2xl font-semibold text-gray-800">NY. Anjani Shatila</h1>
                            <span class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full">AMI</span>
                        </div>
                        <p class="text-sm text-gray-500 mt-1">NRM: 000009</p>
                        <p class="text-sm text-gray-500">Tanggal Terdaftar: 25 Juni 2017</p>
                    </div>
                </div>
            </div>

            <!-- Action Section -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                <h2 class="text-xl font-semibold text-gray-800 mb-6">Tambah Tindakan</h2>
                
                <div class="space-y-6">
                    <!-- Basic Info -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Poli</label>
                            <input type="text" value="Poli Penyakit Dalam" disabled class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Dokter PJ</label>
                            <input type="text" value="dr. Sho" disabled class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500">
                        </div>
                    </div>

                    <!-- Date and Type -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Tanggal Tindakan</label>
                            <input type="date" value="2025-06-18" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Jenis Tindakan</label>
                            <select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-transparent">
                                <option>Pemeriksaan Fisik</option>
                                <option>Konsultasi</option>
                                <option>Tindakan Medis</option>
                            </select>
                        </div>
                    </div>

                    <!-- Anamnesis -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Anamnesis</label>
                        <textarea rows="6" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-transparent" placeholder="Masukkan keluhan dan riwayat pasien...">Keluhan utama: Pusing tiba-tiba di bagian depan kepala (frontal) dan leher sering terasa kaku.
Awal keluhan: Tidak pasti, dirasakan sejak beberapa hari/minggu terakhir.
Frekuensi: Terjadi beberapa kali dalam sehari/minggu.
Sifat nyeri: Berat, tidak hilang dengan istirahat; kadang disertai rasa tidak nyaman di leher.
Pola aktivitas: Duduk lama, menunduk, letih, atau stres.
Faktor peringan: Istirahat, pergantian leher.
Keluhan lain: Tidak ada mual, muntah, gangguan penglihatan, atau kesemutan.
Riwayat serupa sebelumnya: Pernah sesekali dirasakan, namun lebih ringan.
Riwayat penyakit lain: -</textarea>
                    </div>

                    <!-- Vital Signs -->
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Tekanan Darah</label>
                            <input type="text" value="135/76" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Nadi</label>
                            <input type="text" value="118 bpm" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Respirasi</label>
                            <input type="text" value="97%" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Suhu</label>
                            <input type="text" value="36.5Â°C" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-transparent">
                        </div>
                    </div>

                    <!-- Diagnosis -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Diagnosis</label>
                        <textarea rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-transparent">Tension-type headache dengan spasme otot leher
Pertimbangan banding: Cervicogenic headache, sinusitis ringan (jika ada pilek)</textarea>
                    </div>

                    <!-- Resep Section -->
                    <div>
                        <div class="flex items-center justify-between mb-4">
                            <label class="block text-sm font-medium text-gray-700">Resep</label>
                            <button id="tambahResepBtn" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm flex items-center space-x-2 transition-colors">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                                </svg>
                                <span>Tambahkan Resep</span>
                            </button>
                        </div>
                        <div id="resepList" class="space-y-3">
                            <!-- Resep items will be added here -->
                        </div>
                    </div>

                    <!-- Follow Up -->
                    <div class="gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Tindakan Lanjut</label>
                            <select id="tindakanLanjut" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-transparent">
                                <option value="">-- Pilih --</option>
                                <option value="pulang">Pulang</option>
                                <option value="kontrol">Kontrol</option>
                                <option value="rawat-inap">Rawat Inap</option>
                                <option value="dirujuk">Dirujuk</option>
                            </select>
                        </div>
                        <div id="rujukSection" class="hidden mt-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Rujuk ke-</label>
                            <select id="rujukKe" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-transparent">
                                <option value="">-- Pilih --</option>
                                <option value="poli">Poli lain</option>
                                <option value="rs">RS Lain</option>
                            </select>
                        </div>
                        <div id="rujukPoli" class="hidden flex space-x-4 mt-6">
                            <div class="flex-1">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Nama Poli</label>
                                <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-transparent">
                            </div>
                        </div>
                        <div class="hidden flex space-x-4 mt-6" id="rujukRS">
                            <div class="flex-1">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Nama Rumah Sakit</label>
                            <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-transparent">
                        </div>
                    </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex justify-end space-x-4 pt-6 border-t border-gray-200">
                        <a href="tabel-riwayat.html"><button class=" text-sm px-6 py-2 border border-gray-300 text-gray-700 px-4 py-2 rounded-lg flex items-center space-x-2 hover:bg-gray-50 transition-colors">
                            Kembali
                        </button>
                        </a>
                        <a href="tabel-riwayat.html"><button class="text-sm bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors">
                            Tambah Pasien
                        </button>
                        </a>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal Popup Resep -->
    <div id="resepModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-11/12 max-w-2xl shadow-lg rounded-lg bg-white">
            <div class="mt-3">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold text-gray-900">Tambah Resep</h3>
                    <button id="closeModal" class="text-gray-400 hover:text-gray-600">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                    </button>
                </div>

                <form id="resepForm" class="space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Nama Obat</label>
                            <input type="text" id="namaObat" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-transparent" placeholder="Contoh: Paracetamol">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Dosis</label>
                            <input type="text" id="dosis" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-transparent" placeholder="Contoh: 500mg">
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Frekuensi</label>
                            <select id="frekuensi" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-transparent">
                                <option value="">Pilih Frekuensi</option>
                                <option value="1x sehari">1x sehari</option>
                                <option value="2x sehari">2x sehari</option>
                                <option value="3x sehari">3x sehari</option>
                                <option value="4x sehari">4x sehari</option>
                                <option value="Bila perlu">Bila perlu</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Waktu</label>
                            <select id="waktu" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-transparent">
                                <option value="">Pilih Waktu</option>
                                <option value="Sebelum makan">Sebelum makan</option>
                                <option value="Sesudah makan">Sesudah makan</option>
                                <option value="Saat makan">Saat makan</option>
                                <option value="Bebas">Bebas</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Jumlah</label>
                            <input type="number" id="jumlah" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-transparent" placeholder="10" min="1">
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Catatan Tambahan</label>
                        <textarea id="catatan" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-transparent" placeholder="Catatan khusus untuk pasien..."></textarea>
                    </div>

                    <div class="flex justify-end space-x-3 pt-4">
                        <button type="button" id="cancelResep" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors">
                            Batal
                        </button>
                        <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                            Simpan Resep
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
    const tindakanLanjut = document.getElementById('tindakanLanjut');
    const rujukSection = document.getElementById('rujukSection');
    const rujukKe = document.getElementById('rujukKe');
    const rujukPoli = document.getElementById('rujukPoli');
    const rujukRS = document.getElementById('rujukRS');

    tindakanLanjut.addEventListener('change', function () {
        const val = this.value;
        
        // Reset all
        rujukSection.classList.add('hidden');
        rujukPoli.classList.add('hidden');
        rujukRS.classList.add('hidden');

        if (val === 'dirujuk') {
            rujukSection.classList.remove('hidden');
        }
    });

    rujukKe.addEventListener('change', function () {
        const val = this.value;
        rujukPoli.classList.add('hidden');
        rujukRS.classList.add('hidden');

        if (val === 'poli') {
            rujukPoli.classList.remove('hidden');
        } else if (val === 'rs') {
            rujukRS.classList.remove('hidden');
        }
    });

    // Resep functionality
const resepModal = document.getElementById('resepModal');
const tambahResepBtn = document.getElementById('tambahResepBtn');
const closeModal = document.getElementById('closeModal');
const cancelResep = document.getElementById('cancelResep');
const resepForm = document.getElementById('resepForm');
const resepList = document.getElementById('resepList');

let resepData = [];
let editingIndex = -1;

// Show modal
tambahResepBtn.addEventListener('click', function() {
    resepModal.classList.remove('hidden');
    resetForm();
    editingIndex = -1;
});

// Close modal
closeModal.addEventListener('click', closeResepModal);
cancelResep.addEventListener('click', closeResepModal);

// Close modal when clicking outside
resepModal.addEventListener('click', function(e) {
    if (e.target === resepModal) {
        closeResepModal();
    }
});

function closeResepModal() {
    resepModal.classList.add('hidden');
    resetForm();
}

function resetForm() {
    document.getElementById('namaObat').value = '';
    document.getElementById('dosis').value = '';
    document.getElementById('frekuensi').value = '';
    document.getElementById('waktu').value = '';
    document.getElementById('jumlah').value = '';
    document.getElementById('catatan').value = '';
}

// Submit resep form
resepForm.addEventListener('submit', function(e) {
    e.preventDefault();
    
    const namaObat = document.getElementById('namaObat').value;
    const dosis = document.getElementById('dosis').value;
    const frekuensi = document.getElementById('frekuensi').value;
    const waktu = document.getElementById('waktu').value;
    const jumlah = document.getElementById('jumlah').value;
    const catatan = document.getElementById('catatan').value;

    if (!namaObat || !dosis || !frekuensi || !waktu || !jumlah) {
        alert('Mohon lengkapi semua field yang wajib diisi');
        return;
    }

    const resepItem = {
        namaObat,
        dosis,
        frekuensi,
        waktu,
        jumlah,
        catatan,
        createdAt: new Date().toISOString()
    };

    if (editingIndex >= 0) {
        resepData[editingIndex] = resepItem;
        editingIndex = -1;
    } else {
        resepData.push(resepItem);
    }

    renderResepList();
    closeResepModal();
});

function renderResepList() {
    resepList.innerHTML = '';
    
    if (resepData.length === 0) {
        resepList.innerHTML = `
            <div class="text-center py-8 text-gray-500">
                <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                </svg>
                <p class="mt-2">Belum ada resep yang ditambahkan</p>
            </div>
        `;
        return;
    }
    
    resepData.forEach((resep, index) => {
        const resepDiv = document.createElement('div');
        resepDiv.className = 'bg-gray-50 border border-gray-200 rounded-lg p-4';
        
        resepDiv.innerHTML = `
            <div class="flex justify-between items-start">
                <div class="flex-1">
                    <div class="flex items-center space-x-4 mb-2">
                        <h4 class="font-medium text-gray-900">${resep.namaObat}</h4>
                        <span class="text-sm text-gray-600">${resep.dosis}</span>
                    </div>
                    <div class="text-sm text-gray-600 mb-1">
                        <span class="font-medium">Aturan:</span> ${resep.frekuensi} ${resep.waktu} - Jumlah: ${resep.jumlah}
                    </div>
                    ${resep.catatan ? `<div class="text-sm text-gray-500">Catatan: ${resep.catatan}</div>` : ''}
                </div>
                <div class="flex space-x-2">
                    <button onclick="editResep(${index})" class="text-blue-600 hover:text-blue-800 text-sm">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                        </svg>
                    </button>
                    <button onclick="deleteResep(${index})" class="text-red-600 hover:text-red-800 text-sm">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5-4h4a2 2 0 012 2v2H7V5a2 2 0 012-2h4z"/>
                        </svg>
                    </button>
                </div>
            </div>
        `;
        
        resepList.appendChild(resepDiv);
    });
}

// Edit resep function
function editResep(index) {
    const resep = resepData[index];
    
    document.getElementById('namaObat').value = resep.namaObat;
    document.getElementById('dosis').value = resep.dosis;
    document.getElementById('frekuensi').value = resep.frekuensi;
    document.getElementById('waktu').value = resep.waktu;
    document.getElementById('jumlah').value = resep.jumlah;
    document.getElementById('catatan').value = resep.catatan;
    
    editingIndex = index;
    resepModal.classList.remove('hidden');
}

// Delete resep function
function deleteResep(index) {
    if (confirm('Apakah Anda yakin ingin menghapus resep ini?')) {
        resepData.splice(index, 1);
        renderResepList();
    }
}

// Initialize the page
document.addEventListener('DOMContentLoaded', function() {
    renderResepList();
});

// Optional: Add search functionality
function searchResep(searchTerm) {
    const filteredData = resepData.filter(resep => 
        resep.namaObat.toLowerCase().includes(searchTerm.toLowerCase()) ||
        resep.dosis.toLowerCase().includes(searchTerm.toLowerCase()) ||
        resep.frekuensi.toLowerCase().includes(searchTerm.toLowerCase())
    );
    
    // Temporarily store original data
    const originalData = resepData;
    resepData = filteredData;
    renderResepList();
    resepData = originalData;
}

// Optional: Export resep data
function exportResepData() {
    const dataStr = JSON.stringify(resepData, null, 2);
    const dataBlob = new Blob([dataStr], {type: 'application/json'});
    const url = URL.createObjectURL(dataBlob);
    
    const link = document.createElement('a');
    link.href = url;
    link.download = `resep-data-${new Date().toISOString().split('T')[0]}.json`;
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    URL.revokeObjectURL(url);
}

// Optional: Import resep data
function importResepData(fileInput) {
    const file = fileInput.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            try {
                const importedData = JSON.parse(e.target.result);
                if (Array.isArray(importedData)) {
                    resepData = importedData;
                    renderResepList();
                    alert('Data berhasil diimpor!');
                } else {
                    alert('Format file tidak valid!');
                }
            } catch (error) {
                alert('Error membaca file: ' + error.message);
            }
        };
        reader.readAsText(file);
    }
}
</script>
</body>
</html>